---

name: Alma9-CI

on:
  push:
    branches: [ "main" ]
    paths-ignore:
      - 'README.md'
      - '**/*.md'
      - .gitignore
      - ./meta/main.yml

  pull_request:
    branches: [ "main" ]
    paths-ignore:
      - 'README.md'
      - '**/*.md'
      - .gitignore

permissions:
  contents: read

jobs:
  alma9-ci:
    uses: philnewm/ansible-role-repo-control/.github/workflows/molecule-ci.yml@main
    with:
      scenario_name: test_alma9
      pre_run_script: |
        sed -i -e "s/client_id='your OAuth application ID'/client_id='\${{ secrets.secret_01 }}'/g" \
               -e "s/client_secret_key='your OAuth application secret'/client_secret_key='\${{ secrets.secret_02 }}'/g" ./scripts/api_download.py
    secrets:
      secret_01: ${{ secrets.SIDEFX_CLIENT_ID }}
      secret_02: ${{ secrets.SIDEFX_CLIENT_SECRET }}

...
